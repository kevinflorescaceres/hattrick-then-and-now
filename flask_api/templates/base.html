<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>{{ title if title else "Hattrick Dashboard" }}</title>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
        <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <script>
            document.addEventListener("DOMContentLoaded", function () {
                document.querySelectorAll(".sortable th").forEach((header, index) => {
                    header.addEventListener("click", () => {
                        const table = header.closest("table");
                        const tbody = table.querySelector("tbody");
                        const rows = Array.from(tbody.querySelectorAll("tr"));
                        const isAsc = header.classList.contains("asc");

                        rows.sort((a, b) => {
                            let aText = a.children[index].innerText.replace(",", ".");
                            let bText = b.children[index].innerText.replace(",", ".");

                            let aNum = parseFloat(aText);
                            let bNum = parseFloat(bText);

                            if (!isNaN(aNum) && !isNaN(bNum)) {
                                return isAsc ? bNum - aNum : aNum - bNum;
                            } else {
                                return isAsc
                                    ? bText.localeCompare(aText)
                                    : aText.localeCompare(bText);
                            }
                        });

                        header.classList.toggle("asc", !isAsc);
                        header.classList.toggle("desc", isAsc);

                        rows.forEach(r => tbody.appendChild(r));
                    });
                });
            });
        </script>
    </head>

    <body class="ht-bg">
        <nav class="navbar navbar-dark bg-dark shadow-sm p-3 mb-4 rounded">
            <div class="container d-flex justify-content-between">
                <a class="navbar-brand fw-bold" href="/">Dashboard</a>
                <div>
                    <a class="nav-link d-inline mx-3 text-white" href="/">Ranking</a>
                    <a class="nav-link d-inline text-white" href="/head-to-head">Head-to-Head</a>
                </div>
            </div>
        </nav>
        <div class="container py-5" style="max-width: 1100px;">
            <div class="fade-in">
                {% block content %}
                {% endblock %}
            </div>
        </div>
    </body>
</html>
